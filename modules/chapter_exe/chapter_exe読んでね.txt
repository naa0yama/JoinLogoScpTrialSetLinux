//
// chapter_exe By ru
//　ほぼかんせいばん

■概要

　chapter.auf（無音検索＋シーンチェンジ(SC)検索付き）と同等の検索処理を
　Aviutlを使わずに処理するプログラムです。

　入力：avsファイル、wavファイル、その他 *.aui で読み込めるファイル
　　　　（音声はFAWデコード対応：別途プラグイン要）
　出力：txtファイル（無音・SC位置の情報が入る）

■使い方

準備：
　基本的にavsinp.auiのあるフォルダにchapter_exe.exeを置いてください。
　※avs以外からの入力も出来ます。下記参照

使う：
　batファイルとかから、
	chapter_exe.exe -v "画像ソースファイル" -a "音声ソースファイル" -o "出力先txt" -m 無音閾値 -s 連続フレーム数
　のように呼び出す。画像を音声が同じソースの場合は -a を省略可能。
　-m を省略時は 50、-s を省略時は 10 となる。

　具体的には、
	chapter_exe.exe -v "C:\in.avs" -o "C:\out.txt" -m 100 -s 15
　こんな感じ。それぞれスペースあけてね。
　上の設定の場合、無音閾値 100、無音連続フレーム数 15 にて
　in.avsの音声から無音検索後、in.avsの映像でSCチェックを行う。
　結果は、out.txt にchapter.auf用のフォーマットで出力される。

　別の入力プラグインを使う場合は、たとえばソースファイル名を
	"mp4input.aui://C:\mp4movie.mp4"
　とすれば、mp4input.auiを使ってC:\mp4movie.mp4を開きます。出来ればフルパス推奨。

　入力プラグインを指定しなかった場合は、avsあるいはwavとして開こうとします。

■FAWの入力について

　先頭10フレームからFAWを検出した場合はデコードしながら無音検索します。
　デコードには FAWPreview.auf が必要なので、同じフォルダに置いてください。
　（ソースの場所から入手できます）　

■ソースコード

　このへんにおいてます。わりとすぱげってぃ。
　http://code.google.com/p/rutice/
　改変時はソース公開お願いします。

■今後の方針

　・安定したらchapter.aufと併せて配布する
　・エラーチェックをちゃんとする

■履歴

2011.03.04
　BonTsDemuxで出力したwavを読み込めるようにした（RF64はまた今度）
　内部処理を改善

2011.03.01
　FAW対応（FAWPreview.aufが必要）
　無音検索を高速化（chapter.aufと同様の処理）
　　　　
2011.02.25
　引数をちゃんとした。
　画像と音声に別のソースを指定できるようになった。
　入力プラグインを指定できるようになった。
　wavは入力プラグインなしで読めるようになった。

2011.02.24
　 初版。作ってみた。